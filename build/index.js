(()=>{var e={151:()=>{document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".services-grid.slider-mode").forEach(function(e){const t=e.querySelector(".services-slider-container"),o=e.querySelectorAll(".service-card"),n=e.parentElement.querySelector(".nav-prev"),s=e.parentElement.querySelector(".nav-next");if(!t||0===o.length)return;let r=0;const a=o.length;function c(){const e=window.innerWidth;return e<=767?1:e<=991?2:4}function i(){const e=c(),o=100/c(),i=Math.max(0,a-e);r>i&&(r=i);const l=-r*o;t.style.transform=`translateX(${l}%)`,n.disabled=0===r,s.disabled=r>=i,n.style.opacity=0===r?"0.5":"1",s.style.opacity=r>=i?"0.5":"1"}n&&n.addEventListener("click",function(e){e.preventDefault(),r>0&&(r--,i())}),s&&s.addEventListener("click",function(e){e.preventDefault();const t=c(),o=Math.max(0,a-t);r<o&&(r++,i())});let l,d=0,u=0,m=!1;t.addEventListener("touchstart",function(e){d=e.touches[0].clientX,m=!0}),t.addEventListener("touchmove",function(e){m&&(u=e.touches[0].clientX,e.preventDefault())}),t.addEventListener("touchend",function(e){if(!m)return;m=!1;const t=d-u,o=c(),n=Math.max(0,a-o);Math.abs(t)>50&&(t>0&&r<n?(r++,i()):t<0&&r>0&&(r--,i()))}),window.addEventListener("resize",function(){clearTimeout(l),l=setTimeout(function(){const e=c(),t=Math.max(0,a-e);r>t&&(r=t),i()},250)}),i()})})},259:()=>{console.log("Header.js loaded!"),document.addEventListener("DOMContentLoaded",function(){console.log("DOM loaded, initializing header functionality..."),setTimeout(function(){console.log("Delayed initialization started..."),function(){if(console.log("=== Header Initialization ==="),window.headerInitialized)return void console.log("‚ö†Ô∏è Header already initialized, skipping...");console.log("‚úÖ First time header initialization");const e=document.querySelector(".mobile-menu-toggle"),t=document.querySelector(".main-navigation"),o=document.querySelector(".mobile-menu-close");if(console.log("Elements found:",{mobileToggle:e,navigation:t,mobileMenuClose:o}),e&&t){console.log("Adding click event listener to mobile toggle"),e.removeEventListener("click",e._clickHandler);const o=function(o){o.preventDefault(),o.stopPropagation();const n=t.classList.contains("active");console.log("Current state - isActive:",n),t.classList.toggle("active"),e.classList.toggle("active"),document.body.classList.toggle("menu-open")};e._clickHandler=o,e.addEventListener("click",o),console.log("Mobile toggle button styled for debugging")}else console.error("Mobile menu elements not found!",{mobileToggle:!!e,navigation:!!t});o&&t&&(console.log("Adding close event listener to mobile menu close button"),o.addEventListener("click",function(){console.log("Mobile menu close button clicked!"),t.classList.remove("active"),e&&e.classList.remove("active"),document.body.classList.remove("menu-open")}));const n=document.querySelector("#search-toggle, .search-icon"),s=document.querySelector("#search-popup-modal"),r=document.querySelector(".mfp-close, .hkangles-mfp-close"),a=document.querySelector(".hendy-searchform-field");console.log("Search elements found:",{searchToggle:!!n,searchModal:!!s,searchClose:!!r,searchField:!!a}),n&&s&&n.addEventListener("click",function(e){e.preventDefault(),console.log("Search toggle clicked!"),s.classList.add("show"),s.classList.add("mfp-ready"),s.style.display="flex",console.log("Search modal should now be visible"),console.log("Modal classes:",s.className),console.log("Modal style.display:",s.style.display),a&&setTimeout(()=>{a.focus(),console.log("Search field focused")},100)}),r&&s&&r.addEventListener("click",function(){console.log("Search close clicked!"),s.classList.remove("show"),s.classList.remove("mfp-ready"),s.style.display="none"}),s&&(s.addEventListener("click",function(e){e.target===s&&(console.log("Clicked outside search form, closing..."),s.classList.remove("show"),s.classList.remove("mfp-ready"),s.style.display="none")}),document.addEventListener("keydown",function(e){"Escape"!==e.key||!s.classList.contains("show")&&"flex"!==s.style.display||(console.log("ESC key pressed, closing search modal..."),s.classList.remove("show"),s.classList.remove("mfp-ready"),s.style.display="none")}));let c=0;const i=document.querySelector(".site-header-container, .wp-block-carpentry-header");i&&window.addEventListener("scroll",function(){const e=window.pageYOffset||document.documentElement.scrollTop;e>100?i.classList.add("scrolled"):i.classList.remove("scrolled"),c=e}),document.querySelectorAll(".main-navigation a").forEach(o=>{o.addEventListener("click",function(){window.innerWidth<=991.98&&(t.classList.remove("active"),e.classList.remove("active"),document.body.classList.remove("menu-open"))})}),window.addEventListener("resize",function(){window.innerWidth>991.98&&(t.classList.remove("active"),e.classList.remove("active"),document.body.classList.remove("menu-open"))}),window.headerInitialized=!0,console.log("üéâ Header initialization completed!")}()},100)})},386:()=>{document.addEventListener("DOMContentLoaded",function(){function e(...e){!0===window.CARPENTRY_DEBUG&&console.debug("[CarpentryForms]",...e)}void 0!==window.carpentryBlocks&&carpentryBlocks.ajaxUrl||console.error("[CarpentryForms] carpentryBlocks.ajaxUrl no est√° disponible. Verifica que el script principal est√© encolado y que wp_localize_script se ejecuta antes.");const t=document.querySelectorAll(".quote-form, .contact-form");function o(e,t,o){e.innerHTML="<p>"+t+"</p>",e.className="form-messages "+("success"===o?"success":"error"),e.style.display="block",e.scrollIntoView({behavior:"smooth",block:"nearest"}),"success"===o&&setTimeout(()=>{e.style.display="none"},5e3)}e(`Encontrados ${t.length} formularios`),t.forEach(function(t,n){e(`Inicializando formulario #${n+1}`,t),t.addEventListener("submit",function(s){s.preventDefault();const r=t.getAttribute("id")||`form-${n+1}`;console.groupCollapsed(`[CarpentryForms] Enviando ${r} (${(new Date).toISOString()})`);const a=t.querySelector('button[type="submit"]'),c=t.querySelector(".form-messages"),i=a?a.textContent:"";a?(a.disabled=!0,a.textContent="Enviando..."):console.warn("[CarpentryForms] No se encontr√≥ bot√≥n submit en",t),c&&(c.style.display="none",c.className="form-messages");const l=new FormData(t);l.append("action","carpentry_contact_form");const d={};l.forEach((e,t)=>{"mensaje"===t?d[t]=(e||"").toString().slice(0,60)+(e&&e.length>60?"‚Ä¶":""):t.toLowerCase().includes("nonce")?d[t]=e?"(presente)":"(vac√≠o)":d[t]=e}),e("Payload",d);const u=window.carpentryBlocks&&carpentryBlocks.ajaxUrl||"/wp-admin/admin-ajax.php";e("Usando ajaxUrl",u);const m=performance.now();fetch(u,{method:"POST",body:l,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(async t=>{const o=(performance.now()-m).toFixed(0);e(`HTTP status ${t.status} (${o}ms)`);const n=await async function(t){const o=t.clone();try{return{ok:!0,json:await t.json(),raw:null}}catch(t){e("JSON parse failed",t);try{return{ok:!1,json:null,raw:await o.text()}}catch(e){return{ok:!1,json:null,raw:null}}}}(t);return n.ok?(e("JSON recibido",n.json),{response:t,data:n.json}):(console.error("[CarpentryForms] Respuesta no-JSON. Posible error PHP/WP (ver raw).",n.raw),{response:t,data:{success:!1,data:"Respuesta inesperada del servidor. Revisa consola.",_raw:n.raw}})}).then(e=>{const{data:n}=e;if(n.success&&n.data){const e="object"==typeof n.data&&n.data.message?n.data.message:n.data;return o(c,e,"success"),t.reset(),void console.info("[CarpentryForms] √âxito:",n.data)}if(!n.success&&n.data){const e=n.data;let s=e.message||e.data||"Error desconocido";return e.code&&"validation"!==e.code&&"sent"!==e.code&&(s+=` (c√≥digo: ${e.code})`),"validation"===e.code&&e.debug&&e.debug.fields&&Object.keys(e.debug.fields).forEach(e=>{const o=t.querySelector(`[name="${e}"]`);o&&o.classList.add("error")}),o(c,s,"error"),void console.error("[CarpentryForms] Error del servidor estructurado:",e)}o(c,"Respuesta inesperada del servidor","error"),console.error("[CarpentryForms] Estructura de respuesta inesperada",n)}).catch(e=>{console.error("[CarpentryForms] Error de red o JS:",e),o(c,"Error al enviar el mensaje. Por favor, int√©ntalo de nuevo.","error")}).finally(()=>{a&&(a.disabled=!1,a.textContent=i),console.groupEnd()})})}),document.querySelectorAll(".quote-form input, .quote-form textarea, .quote-form select, .contact-form input, .contact-form textarea, .contact-form select").forEach(function(e){e.addEventListener("blur",function(){!function(e){const t=e.value.trim();let o=!0;e.hasAttribute("required")&&!t&&(o=!1),"email"===e.type&&t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(o=!1)),"tel"===e.type&&t&&(/^[6-9]\d{8}$|^[89]\d{8}$/.test(t.replace(/\s/g,""))||/^[+]?[0-9\s\-()]{9,}$/.test(t)||(o=!1)),o?(e.classList.remove("error"),e.classList.add("valid")):(e.classList.remove("valid"),e.classList.add("error"))}(e)}),e.addEventListener("input",function(){e.classList.contains("error")&&e.classList.remove("error")})})})},617:()=>{document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("back-to-top");e&&(window.addEventListener("scroll",function(){window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}));const t=document.querySelectorAll(".footer-widget");if(t.length>0){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});t.forEach(t=>{t.style.opacity="0",t.style.transform="translateY(20px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease",e.observe(t)})}})}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";o(259),o(617),o(151),o(386),document.addEventListener("DOMContentLoaded",function(){console.log("Carpentry Block Theme assets loaded")})})()})();